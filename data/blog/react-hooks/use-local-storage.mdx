---
title: React Hooks 的实现 - useLocalStorage 与 useSessionStorage
date: '2022-09-16'
tags: ['react-hooks']
draft: true
summary: 分析主流 react hooks 开源库对 useSetState 的实现方式
---

https://www.npmjs.com/package/localstorage-slim

# 实现需求

# 实现思路

[localStorage][1-1] 与 [sessionStorage][1-2] 使用的接口 [Storage][1-3] 都是一致的，这是 [Web Storage API][1-4] 的接口，提供了访问特定域名下的本地存储/会话存储（localStorage/sessionStorage） 的功能，例如可以添加、修改或删除存储的数据项。

如果想要操作一个域名的本地存储，可以使用 [window.localStorage][1-2]；如果你想要操作一个域名的会话存储，可以使用 [window.sessionStorage][1-2]。

Storage 提供的主要属性与方法包括：

- Storage.length
- Storage.key() 接受一个数值 n 作为参数，并返回存储中的第 n 个键名 —— 不常用
- Storage.getItem() 接受一个键名作为参数，返回键名对应的值
- Storage.setItem() 接受一个键名和值作为参数，将会把键值对添加到存储中，如果键名存在，则更新其对应的值
- Storage.removeItem() 接受一个键名作为参数，并把该键名从存储中删除
- Storage.clear() 清空存储中的所有键名

[1-1]: https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage
[1-2]: https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage
[1-3]: https://developer.mozilla.org/en-US/docs/Web/API/Storage
[1-4]: https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API
